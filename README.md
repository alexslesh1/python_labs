# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ4
## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
üì¶ PYTHON_LABS
‚î£ üìÇ misc
‚î£ üìÇ src
‚îÉ  ‚î£ üìÇ lab01
‚îÉ  ‚î£ üìÇ lab02
‚îÉ  ‚îó üìÇ lab03
‚îÉ     ‚î£ üìú README.md                    # –û—Ç—á–µ—Ç –ø–æ –ø–æ —Ñ—É–Ω–∫—Ü–∏—è–º –∏–∑ –õ–†3
‚îÉ     ‚îó üìú text_stats.py                # –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞
‚î£ üìÇ lib                                     
‚îÉ  ‚î£ üìú text.py                         # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–∫—Å—Ç–æ–º
‚îÉ  ‚îó üìÇ __pycache__
‚î£ üìÇ data
‚îÉ  ‚îó üìÇ lab04
‚îÉ     ‚î£ üìú input.txt                   # –¢–µ—Å—Ç–æ–≤—ã–π –≤—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª
‚îÉ     ‚î£ üìú a.txt                       # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
‚îÉ     ‚î£ üìú b.txt                       # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
‚îÉ     ‚îó üìú report.csv                  # –ü—Ä–∏–º–µ—Ä –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
‚î£ üìÇ images
‚îÉ  ‚îó üìÇ lab04
‚îÉ     ‚î£ üìú screenshot1.png             # –°–∫—Ä–∏–Ω—à–æ—Ç —Ä–∞–±–æ—Ç—ã –±–∞–∑–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
‚îÉ     ‚î£ üìú screenshot2.png             # –°–∫—Ä–∏–Ω—à–æ—Ç —Ä–∞–±–æ—Ç—ã —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏
‚îÉ     ‚îó üìú screenshot3.png             # –°–∫—Ä–∏–Ω—à–æ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–æ–≤
‚îó üìú README.md                         # –û–±—â–∏–π –æ—Ç—á–µ—Ç –ø–æ –õ–†4                       
```

## –ó–∞–¥–∞–Ω–∞–Ω–∏–µ A

**–§—É–Ω–∫—Ü–∏—è ‚Ññ1**

**–û–ø–∏—Å–∞–Ω–∏–µ:** read_text() ‚Äî –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —á–∏—Ç–∞–µ—Ç –ª—é–±–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –≤ —Å—Ç—Ä–æ–∫—É. –£–∫–∞–∂–∏ –ø—É—Ç—å ‚Äî –ø–æ–ª—É—á–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ. –°–∞–º–∞ —Ä–∞–∑–±–µ—Ä—ë—Ç—Å—è —Å –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏ –∏ –æ—à–∏–±–∫–∞–º–∏. –ú–∞–∫—Å–∏–º—É–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ ‚Äî –º–∏–Ω–∏–º—É–º –∫–æ–¥–∞.

**–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏:**
```
def read_text(path: str, encoding: str = "utf-8") -> str:
    return Path(path).read_text(encoding=encoding)
```

**–§—É–Ω–∫—Ü–∏—è ‚Ññ2**

**–û–ø–∏—Å–∞–Ω–∏–µ:** write_csv() ‚Äî –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ CSV. –ü–µ—Ä–µ–¥–∞–π —Å—Ç—Ä–æ–∫–∏ –∏ –ø—É—Ç—å ‚Äî –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ —Å–¥–µ–ª–∞–µ—Ç —Å–∞–º–∞. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –ø–∞–ø–∫–∏ –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

**–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏:**
```
def write_csv(rows: list, path: str, header: tuple = None) -> None:
    Path(path).parent.mkdir(parents=True, exist_ok=True)
    
    with open(path, 'w', newline='', encoding='utf-8') as f:
        w = writer(f)
        if header:
            w.writerow(header)
        w.writerows(rows)
```

## –ó–∞–¥–∞–Ω–∞–Ω–∏–µ B

**–û–ø–∏—Å–∞–Ω–∏–µ** –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç: —á–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª, –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É —Å–ª–æ–≤, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ CSV –∏ –≤—ã–≤–æ–¥–∏—Ç –∫–ª—é—á–µ–≤—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É. –ì–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫.

**–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥**
```
import sys
from pathlib import Path

sys.path.insert(0, str(Path(__file__).parent.parent))

from lab04.io_txt_csv import read_text, write_csv
from lib.text import normalize, tokenize, count_freq, top_n

def main():
    input_file = "src/data/lab04/input.txt"  
    output_file = "src/data/lab04/report.csv"  
    
    try:
        text = read_text(input_file)
        freq = count_freq(tokenize(normalize(text)))
        write_csv(sorted(freq.items(), key=lambda x: (-x[1], x[0])), 
                 output_file, header=("word", "count"))
        
        print(f"‚úì –û—Ç—á—ë—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω: {output_file}")
        print(f"–í—Å–µ–≥–æ —Å–ª–æ–≤: {sum(freq.values())}")
        print(f"–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å–ª–æ–≤: {len(freq)}")
        print("–¢–æ–ø-5:", *[f"{w}:{c}" for w, c in top_n(freq, 5)])
        
    except FileNotFoundError:
        print(f"‚úó –§–∞–π–ª {input_file} –Ω–µ –Ω–∞–π–¥–µ–Ω")
        sys.exit(1)
    except Exception as e:
        print(f"‚úó –û—à–∏–±–∫–∞: {e}")
        sys.exit(1)

if __name__ == "__main__":
    main()
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
![](misc/img/lab04/image.png)

## –í—ã–≤–æ–¥ 
–í —Ö–æ–¥–µ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ —á—Ç–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –≤ CSV-—Ñ–æ—Ä–º–∞—Ç, —Å–æ–∑–¥–∞–Ω –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç, –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—â–∏–π –º–æ–¥—É–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–∞–±–æ—Ç. –°–∏—Å—Ç–µ–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç–µ–∫—Å—Ç–∞, –ø–æ–¥—Å—á—ë—Ç —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç–∏ —Å–ª–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç—á—ë—Ç–æ–≤. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –∑–∞–¥–∞–Ω–∏–µ–º.